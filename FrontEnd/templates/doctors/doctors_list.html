{% extends 'auth/dashboard.html' %}
{% block content %}
    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <a style="width: 10%; margin-left: 87.2%; margin-top: -4.3%" class="btn btn-primary mb-sm-2"
       href="{% url 'Doctors:doctors_create' %}">Agg Doctor <i class="fa-solid fa-user-doctor fa-lg"></i></a>
    <div class="animated fadeIn">
        <div class="card-body">
            <div id="bootstrap-data-table_wrapper"
                 class="dataTables_wrapper container-fluid dt-bootstrap4 no-footer">
                <div class="row">
                    <div class="col-sm-12">
                        <table id="bootstrap-data-table"
                               class="table table-striped table-bordered dataTable no-footer" role="grid"
                               aria-describedby="bootstrap-data-table_info">
                            <thead>
                            <tr role="row">
                                <th class="sorting_asc" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1" aria-sort="ascending"
                                    aria-label="Name: activate to sort column descending"
                                    style="width: 10px;"><i class="fa-solid fa-hashtag fa-lg"></i>
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1"
                                    aria-label="Salary: activate to sort column ascending"
                                    style="width: 150px;">Clinica
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1"
                                    aria-label="Salary: activate to sort column ascending"
                                    style="width: 150px;">Profesion
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1"
                                    aria-label="Position: activate to sort column ascending"
                                    style="width: 50px;"> Cédula
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1"
                                    aria-label="Office: activate to sort column ascending"
                                    style="width: 200px;">Nombres
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1"
                                    aria-label="Salary: activate to sort column ascending"
                                    style="width: 300px;">Apellidos
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1"
                                    aria-label="Salary: activate to sort column ascending"
                                    style="width: 250px;">Fecha Nacimiento
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1"
                                    aria-label="Salary: activate to sort column ascending"
                                    style="width: 10px;">Sexo
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1"
                                    aria-label="Salary: activate to sort column ascending"
                                    style="width: 50px;">Ubicación
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1"
                                    aria-label="Salary: activate to sort column ascending"
                                    style="width: 10px;">Estado
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="bootstrap-data-table"
                                    rowspan="1" colspan="1"
                                    aria-label="Salary: activate to sort column ascending"
                                    style="width: 175px;">Opciones
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for doctor in doctores %}
                                <tr>
                                    <th scope="row">{{ forloop.counter }}</th>
                                    <td>{{ doctor.clinic.name }}</td>
                                    <td>
                                        {% for profession in doctor.profession.all %}
                                            {{ profession.description }}{% if not forloop.last %}, {% endif %}
                                        {% endfor %}
                                    </td>
                                    <td>{{ doctor.dni }}</td>
                                    <td>{{ doctor.first_name }}</td>
                                    <td>{{ doctor.last_name }}</td>
                                    <td>{{ doctor.birth_date | date:'d-M-Y' }}</td>
                                    <td>{{ doctor.sex }}</td>
                                    {#                                    <td>{{ doctor.get_sex_display }}</td>#}
                                    <td>{{ doctor.address }}</td>
                                    <td>
                                        {% if doctor.is_active %}
                                            <i class="fa-solid fa-circle-check" style="color: #3cff3c;"></i>
                                        {% else %}
                                            <i class="fa-solid fa-circle-xmark" style="color: red;"></i>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <a href="{% url 'Doctors:doctors_update' doctor.pk %}"
                                           class="btn btn-primary" style="background-color: #eaea2e; border: none"
                                           title="Editar">
                                            <i class="fa-solid fa-pen-to-square fa-lg"></i>
                                        </a>
                                        <a href="{% url 'Doctors:doctor_delete' doctor.pk %}" class="btn btn-primary" title="Eliminar"
                                           style="background-color: red; border: none">
                                            <i class="fa-solid fa-trash-can fa-lg"></i>
                                        </a>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="11" class="text-center">No doctors available</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
